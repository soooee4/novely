"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[673],{7673:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(1087),r=a(7689),o=a(2791),i=a(7630),l=a(697),s=a(890),d=a(7545),c=a(1024),g=a(3047),u=a(5678),h=a(3826),p=a(9101),f=a(472),x=a(941),m=a(184);const j=(0,i.ZP)(l.Z)({justifyContent:"center",alignItems:"center",padding:"0px 20px 20px 20px"}),_=(0,i.ZP)(p.Z)({width:"100%","& .MuiInputBase-input":{height:20,fontSize:14,marginTop:8}}),S=(0,i.ZP)(l.Z)({width:"100%",display:"flex",justifyContent:"flex-end"}),O={backgroundColor:"white",color:"black",border:"none",cursor:"pointer",display:"block",margin:"0 auto",fontSize:15},T=e=>{const{closeModal:t}=e,[a,n]=(0,o.useState)(JSON.parse(localStorage.getItem("profile"))),[r,i]=(0,o.useState)(""),[s,c]=(0,o.useState)(""),[g,u]=(0,o.useState)(a.user_nickname),[p,T]=(0,o.useState)(),[P,N]=(0,o.useState)(""),[v,I]=(0,o.useState)(""),[R,y]=(0,o.useState)(""),[B,Z]=(0,o.useState)(""),[E,C]=(0,o.useState)("W"===a.user_reg_dv),[b,w]=(0,o.useState)(""),[k,A]=(0,o.useState)(""),U=(0,o.useMemo)((()=>""!==k?k:"".concat("http://54.180.116.208:8080/profile","/").concat(a.image,"?").concat(Date.now())),[a.image,k]),W=/^.{1,12}$/,L=(0,o.useRef)(null);return(0,m.jsxs)(j,{children:[(0,m.jsx)(l.Z,{sx:{width:180,height:180,borderRadius:"50%",margin:"0 auto",marginTop:4,marginBottom:2,backgroundImage:"url(".concat(U,")"),backgroundSize:"cover"}}),(0,m.jsx)("input",{type:"file",accept:"image/jpg, image/jpeg, image/png",onChange:e=>(e=>{const t=e.target.files[0];if(T(t),w(t.name),t){const e=new FileReader;e.onloadend=()=>{A(e.result)},e.readAsDataURL(t)}})(e),style:{display:"none"},ref:L}),b&&(0,m.jsx)("p",{style:{fontSize:12,textAlign:"center",margin:"0 auto"},children:b}),(0,m.jsx)("button",{onClick:()=>{L.current.click()},style:O,children:h.GP.BUTTONS.UPLOAD_IMAGE}),(0,m.jsx)(_,{id:"standard-read-only-input",InputProps:{readOnly:!0},variant:"standard",placeholder:a.login_id}),(0,m.jsx)(_,{id:"standard-basic",variant:"standard",defaultValue:a.user_nickname,onChange:e=>{u(e.target.value)},onBlur:e=>{W.test(e.target.value)?y(""):y(h.$B.ERROR.NICKNAME_INVALIDATION)},helperText:""!==R?R:""}),(0,m.jsx)(_,{id:"standard-basic",variant:"standard",placeholder:h.GP.INPUT.PLACE_HOLDER.CURRENT_PW,onChange:e=>{c(e.target.value)},type:"password"}),(0,m.jsx)(_,{id:"standard-basic",variant:"standard",placeholder:h.GP.INPUT.PLACE_HOLDER.NEW_PW,onChange:e=>{i(e.target.value)},type:"password",onBlur:()=>{I((0,x.qb)(r))},value:r,helperText:v}),(0,m.jsx)(_,{id:"standard-basic",variant:"standard",placeholder:h.GP.INPUT.PLACE_HOLDER.NEW_PW_REPEAT,type:"password",onBlur:e=>{e.target.value!==r?N(h.$B.ERROR.CONFIRM_NEW_PW):N("")},helperText:""!==P?P:""}),"W"===a.user_reg_dv&&(0,m.jsx)(_,{id:"standard-basic",variant:"standard",defaultValue:a.author_info,onChange:e=>{Z(e.target.value)}}),(0,m.jsx)(S,{children:(0,m.jsx)(d.Z,{type:h.cO.BUTTON.BASIC,name:h.GP.BUTTONS.SUBMIT,onEditProfile:()=>{if(""===s)return void alert(h.$B.WRITE_CUR_PW);if(B.length>50)return void alert(h.$B.ERROR.INFO_INVALIDATION);const e={login_id:a.login_id,user_nickname:g,current_pw:s,new_pw:r,file:p,author_info:B,isAuthor:E,old_img_name:a.image},o=new FormData;Object.keys(e).forEach((t=>{o.append(t,e[t])})),(0,f.B6)("auth/editProfile",o).then((e=>{if("object"===typeof e){const r=JSON.stringify({...a,user_nickname:e.user_nickname,image:e.image,author_info:e.author_info});localStorage.setItem("profile",r),n(r),alert(h.$B.EDIT_SUCCEED),t()}else alert(e)}))},margin:"10px 0 0 auto"})})]})},P=(0,i.ZP)(l.Z)({height:70,display:"flex"}),N=(0,i.ZP)(l.Z)({height:"100%",paddingLeft:"8%",display:"flex"}),v=(0,i.ZP)(s.Z)({color:"black",fontSize:27,fontWeight:"bolder",alignSelf:"center",cursor:"pointer"}),I=(0,i.ZP)(l.Z)({flexGrow:1,marginRight:"5%",justifyContent:"flex-end",display:"flex"}),R=(0,i.ZP)(s.Z)({color:"black",fontSize:15,marginLeft:"auto",fontWeight:"bolder",alignSelf:"center",marginRight:10}),y=(0,i.ZP)(l.Z)({marginRight:50,display:"flex",justifyContent:"flex-end",alignItems:"center"}),B=()=>{const[e,t]=(0,o.useState)(!1),[a,n]=(0,o.useState)("login"),[i,l]=(0,o.useState)(!!localStorage.getItem("profile")),[s,p]=(0,o.useState)(JSON.parse(localStorage.getItem("profile"))),f=s&&s.user_nickname,j=(0,r.s0)(),_=()=>{t(!1)},S=window.location.pathname;return(0,m.jsxs)(P,{children:[(0,m.jsx)(N,{children:(0,m.jsx)(v,{variant:"h1",onClick:()=>j("/"),children:"NOVELY"})}),(0,m.jsxs)(I,{children:[s&&(0,m.jsxs)(R,{children:["G"===s.user_reg_dv?h.$B.PRE_WRITER:h.$B.WRITER,"\xa0",f,"\ub2d8 \ud83d\udc4b"]}),(0,m.jsx)(y,{children:s?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Z,{navigate:()=>j("/favorite_novel"),type:h.cO.BUTTON.BASIC,name:h.GP.BUTTONS.FAVORITE_NOVEL,margin:10,fontWeight:"/favorite_novel"===S&&"bolder"}),"W"===s.user_reg_dv&&(0,m.jsx)(d.Z,{navigate:()=>j("/author_myNovel"),type:h.cO.BUTTON.BASIC,name:h.GP.BUTTONS.MY_NOVEL,margin:10,fontWeight:"/author_myNovel"===S&&"bolder"}),(0,m.jsx)(d.Z,{type:h.cO.BUTTON.BASIC,name:h.GP.BUTTONS.MY_INFO,margin:"10px 25px 10px 10px",showModal:()=>t(!0),changeState:()=>n("editProfile")}),(0,m.jsx)(d.Z,{type:h.cO.BUTTON.BORDER,name:h.GP.BUTTONS.LOGOUT,backgroundColor:"black",color:"white",width:90,logout:()=>{localStorage.removeItem("profile"),j("/"),window.location.reload()}})]}):(0,m.jsx)(d.Z,{type:h.cO.BUTTON.BORDER,name:h.GP.BUTTONS.LOGIN,backgroundColor:"black",color:"white",width:83,showModal:()=>t(!0),changeState:()=>n("login")})})]}),(0,m.jsx)(c.Z,{open:e,width:(0,x.Q$)(a),height:(0,x.cM)(a),onClose:()=>t(!1),popupState:a,children:"login"===a?(0,m.jsx)(g.Z,{changeState:()=>n("join"),isLogin:()=>l(!0)}):"join"===a?(0,m.jsx)(u.Z,{profile:s,setProfile:p,changeState:()=>n("login")}):"editProfile"===a?(0,m.jsx)(T,{profile:s,setProfile:p,closeModal:_}):void 0})]})},Z=e=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(B,{profile:e.profile,setProfile:e.setProfile,logout:e.logout}),e.children]});var E=a(4812);const C=()=>(0,m.jsx)(n.VK,{children:(0,m.jsxs)(r.Z5,{children:[(0,m.jsx)(r.AW,{path:"/*",element:(0,m.jsx)(Z,{children:(0,m.jsx)(E.Z.MainPage,{})})}),"                            ",(0,m.jsx)(r.AW,{path:"/novel_detail",element:(0,m.jsx)(Z,{children:(0,m.jsx)(E.Z.NovDetailPage,{})})}),"            ",(0,m.jsx)(r.AW,{path:"/author_myNovel",element:(0,m.jsx)(Z,{children:(0,m.jsx)(E.Z.AuthorMyNov,{})})}),"            ",(0,m.jsx)(r.AW,{path:"/favorite_novel",element:(0,m.jsx)(Z,{children:(0,m.jsx)(E.Z.FavoriteNov,{})})}),"            "]})})}}]);
//# sourceMappingURL=673.afb43239.chunk.js.map